import{l as e,n,h as t,d as r,i as o,_ as i,a,e as s,f as u,g as l,m as c,b as d}from"./index-7c3a2ef8.js";import f,{PureComponent as p}from"react";import m from"prop-types";import h,{css as g,withTheme as b}from"styled-components";import{a as w,b as v}from"./_curry2-12509879.js";import{_ as x}from"./_curry3-40b58a44.js";import"./_has-bd75b317.js";import{rgba as y}from"polished";import{a as C}from"./featureDetects-426db7d2.js";import{m as S,c as R,n as P}from"./index-2a1ab813.js";import"./path-f5ccb8a3.js";import"./_isString-9eecd9ee.js";import I from"classnames";import{Glyph as E,ICON_CLASSNAME as k}from"./icon.js";import{g as z}from"./attachClassName-14171279.js";import{_ as T}from"./omit-827f20b5.js";import{_ as D}from"./_isArray-a8fe11f0.js";import{_ as j}from"./misc-78673da2.js";import{_ as A,a as M}from"./_xfBase-c1afe6f2.js";import"stream";import O from"uniqid";import"react-click-outside";import N,{CHECKBOX_CLASSNAMES as q}from"./checkbox.js";import"./tag.js";import"./Ellipsis-119daac9.js";import"./isEmpty-80c9cae4.js";import H from"react-resize-detector";import{_}from"./values-93760b27.js";import{a as G}from"./find-beb57f40.js";import"./DropdownTriggerWrapper-cd8a86c0.js";import{a as V}from"./_map-7921efc2.js";import"./dropdown.js";import{_ as W}from"./_concat-41edd650.js";import B from"javascript-natural-sort";import U,{TABLE_PAGINATION_CLASSNAME as L}from"./tablePagination.js";var F=x((function(e,n,t){var r={};for(var o in t)r[o]=t[o];return r[e]=n,r})),K=function(){function e(e,n){this.xf=n,this.f=e,this.all=!0}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.all&&(e=this.xf["@@transducer/step"](e,!0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,n){return this.f(n)||(this.all=!1,e=G(this.xf["@@transducer/step"](e,!1))),e},e}(),J=w(M(["all"],w((function(e,n){return new K(e,n)})),(function(e,n){for(var t=0;t<n.length;){if(!e(n[t]))return!1;t+=1}return!0}))),Q=x((function(e,n,t){if(e>=t.length||e<-t.length)return t;var r=(e<0?t.length:0)+e,o=W(t);return o[r]=n(t[r]),o})),X=v((function(e){return function(){return e}})),Y=x((function(e,n,t){return Q(e,X(n),t)})),Z=function(){function e(e,n){this.xf=n,this.f=e,this.idx=-1,this.found=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,-1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,n){return this.idx+=1,this.f(n)&&(this.found=!0,e=G(this.xf["@@transducer/step"](e,this.idx))),e},e}(),$=w(M([],w((function(e,n){return new Z(e,n)})),(function(e,n){for(var t=0,r=n.length;t<r;){if(e(n[t]))return t;t+=1}return-1}))),ee=function(){function e(e,n){this.xf=n,this.f=e,this.any=!1}return e.prototype["@@transducer/init"]=A.init,e.prototype["@@transducer/result"]=function(e){return this.any||(e=this.xf["@@transducer/step"](e,!1)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,n){return this.f(n)&&(this.any=!0,e=G(this.xf["@@transducer/step"](e,!0))),e},e}(),ne=w(M(["any"],w((function(e,n){return new ee(e,n)})),(function(e,n){for(var t=0;t<n.length;){if(e(n[t]))return!0;t+=1}return!1}))),te=z({name:"TableAuxCell"}),re={ascending:"ASCENDING",descending:"DECENDING",unsorted:"UNSORTED"},oe={small:"small",medium:"medium",large:"large"},ie=re.unsorted,ae=function(t){var r=t.sortMode,o=t.sortingColumnIndex,i=t.rows,a=t.columns;if(void 0===o)return i;var s,u,l=a[o],c=V("sortMethod",l)||B,d=(s=c,e(u={},re.ascending,(function(e,n){return s(e.stringValue,n.stringValue)})),e(u,re.descending,(function(e,n){return s(n.stringValue,e.stringValue)})),e(u,re.unsorted,(function(e,n){return e.initialIndex-n.initialIndex})),u)[r];return i.map((function(e,t){e.id;var r=e.initialIndex,o=e.cells,i="",a=l&&l.accessor(o);return a&&(i="object"===n(a)?V("value",a):a),{stringValue:i,initialIndex:r,index:t}})).sort(d).map((function(e){var n=e.index;return i[n]}))},se="isExpanded",ue="isSelected",le=function(n){var t;return(t={},e(t,oe.small,"6px"),e(t,oe.medium,"14px"),e(t,oe.large,"21px"),t)[n]};function ce(){var e=r(["\n      width: ",";\n    "]);return ce=function(){return e},e}function de(){var e=r(["\n    padding-right: 5px;\n  "]);return de=function(){return e},e}function fe(){var e=r(["\n    padding: ",";\n  "]);return fe=function(){return e},e}function pe(){var e=r(["\n  > div {\n    min-width: ",";\n  }\n  ",";\n  ",";\n  ",";\n"]);return pe=function(){return e},e}var me=h.td(pe(),"100px",(function(e){return g(fe(),e.isInfoCell?"15px 24px":"".concat(le(e.size)," 25px"))}),S.max.phone(de()),(function(e){return e.isInfoCell&&g(ce(),C()?"100%":"0")})),he=function(e){var n=e.children,r=t(e,["children"]);return f.createElement(me,r,f.createElement("div",null,n))};function ge(){var e=r(["\n    transition: ",";\n    transform: rotate(","deg);\n  "]);return ge=function(){return e},e}function be(){var e=r(["\n  ",";\n"]);return be=function(){return e},e}he.propTypes={children:m.node.isRequired};var we=function(e){var n,r=e.pointingDown,i=e.theme,a=e.inactive,s=t(e,["pointingDown","theme","inactive"]);return f.createElement(E,o({name:"arrowTop",styledCSS:(n={pointingDown:r},g(be(),(function(e){return g(ge(),e.theme.transition,n.pointingDown?0:180)}))),color:a?i.colors.sensitiveGrey.darkest:void 0},s))};we.propTypes={theme:m.object.isRequired,pointingDown:m.bool,inactive:m.bool},we.defaultProps={pointingDown:!1,inactive:!1};var ve=b(we),xe=function(e){return z({name:"".concat("TableAuxComponent","--").concat(e)})},ye=function(e){var n,t,r=e.rowInfoArrow,i=e.checkbox;e.size;return r?(n=function(e){return f.createElement(ve,o({size:25.7},e))},t="Arrow"):i&&(n=function(e){return f.createElement(N,o({iconSize:19},e))},t="Checkbox"),n&&function(e){return f.createElement("div",{className:xe(t),style:{paddingRight:"8px"}},f.createElement(n,e))}};function Ce(){var e=r(["\n        &,\n        &:hover {\n          background-color: ",";\n        }\n      "]);return Ce=function(){return e},e}function Se(){var e=r(["\n          &:hover {\n            background-color: ",";\n          }\n        "]);return Se=function(){return e},e}function Re(){var e=r(["\n          opacity: 0.5;\n        "]);return Re=function(){return e},e}function Pe(){var e=r(["\n        background-color: ",";\n      "]);return Pe=function(){return e},e}function Ie(){var e=r(["\n    border-bottom: 1px solid\n      ",";\n    transition: ",";\n    ",";\n    ",";\n    ",";\n    ",";\n    ."," {\n      padding-top: ",";\n    }\n  "]);return Ie=function(){return e},e}function Ee(){var e=r(["\n  ",";\n"]);return Ee=function(){return e},e}var ke=h.tr(Ee(),(function(e){return g(Ie(),y(e.theme.colors.sensitiveGrey.darker,e.disabled?.5:1),e.theme.transition,e.isInfoCell&&g(Pe(),e.theme.colors.sensitiveGrey.base),e.disabled?g(Re()):g(Se(),e.theme.colors.sensitiveGrey.base),R(i({},e,{defaultValue:e.onClick&&"pointer"})),e.isExpanded&&g(Ce(),e.theme.colors.sensitiveGrey.dark),te,le(e.size))})),ze=function(e){var n,t=e.isSelectable,r=e.handleStateChange,i=e.cellsInfo,a=e.accessors,s=e.renderers,u=e.disabled,l=e.displayRowInfoArrow,c=e.size,d=e.rowState,p=Boolean(d.isExpanded&&i.rowInfo),m=a.map((function(e){return e(i)})).map((function(e,n){var t=s[n];return t?t(e,i):e}));return f.createElement(f.Fragment,null,f.createElement(ke,{onClick:function(){if(!u)return function(){return r(i&&i.rowInfo?se:t?ue:null)}}(),isExpanded:d.isExpanded,disabled:u,size:c},(n=ye({rowInfoArrow:l,checkbox:t,size:c}))&&f.createElement("td",{className:te},f.createElement(n,o({},t&&{isChecked:d.isSelected},l&&{pointingDown:d.isExpanded},{disabled:u}))),m.map((function(e,n){return f.createElement(he,{key:n,size:c},e)}))),p&&f.createElement(ke,{isInfoCell:!0},f.createElement(he,{isInfoCell:!0,colSpan:m.length+1},i.rowInfo)))};function Te(){var e=r(["\n    background-color: ",";\n\n    &:after {\n      content: '';\n      position: absolute;\n      left: 0;\n      bottom: 0;\n      width: 100%;\n      height: 1px;\n      background-color: ",";\n    };\n\n    td,\n    th {\n      vertical-align: top;\n      ."," {\n        transform: translate(",");\n      }\n      ."," {\n        transform: translate(",");\n\n        height: 20px;\n      }\n    }\n\n    tr[disabled] {\n      ."," svg {\n        fill: ",";\n      }\n    }\n\n    tbody tr:not([disabled]) {\n      ","\n    }\n    .",":not(.",") svg {\n      fill: ",";\n    }\n  "]);return Te=function(){return e},e}function De(){var e=r(["\n  position: relative;\n  border-collapse: collapse;\n  table-layout: fixed;\n  font-size: 14px;\n\n  ",";\n"]);return De=function(){return e},e}ze.propTypes={cellsInfo:m.object.isRequired,displayRowInfoArrow:m.bool.isRequired,isSelectable:m.bool.isRequired,size:m.string.isRequired,rowState:m.object.isRequired,handleStateChange:m.func,disabled:m.bool,accessors:m.array.isRequired,renderers:m.array.isRequired},ze.defaultProps={handleStateChange:function(){},disabled:!1};var je=function(e){switch(e){case oe.small:return"27px, 0px";default:return"22px, 0px"}},Ae=function(e){switch(e){case oe.small:return"23px, -2px";default:return"22px, -2px"}},Me=function(e,n){return{Checkbox:je,Arrow:Ae}[e](n)},Oe=xe("Checkbox"),Ne=xe("Arrow"),qe=h.table(De(),(function(e){return g(Te(),e.theme.colors.white.base,e.theme.colors.white.base,Oe,Me("Checkbox",e.size),Ne,Me("Arrow",e.size),Ne,e.theme.colors.sensitiveGrey.darker,P("\n        .".concat(q.BASE," svg {\n          fill: ").concat(e.theme.colors.primary.base,";\n        }\n      ")),q.UNCHECKED,q.HOVER,e.theme.colors.sensitiveGrey.darker)}));function He(){var e=r(["\n  max-width: 100%;\n  ",";\n  overflow-x: scroll;\n  overflow-y: hidden;\n  -ms-overflow-style: auto;\n\n  ."," {\n    position: relative;\n    z-index: 1;\n  }\n"]);return He=function(){return e},e}function _e(){var e=r(["\n        opacity: 0;\n      "]);return _e=function(){return e},e}function Ge(){var e=r(["\n        width: ",";\n      "]);return Ge=function(){return e},e}var Ve=h.div(He(),(function(e){return e.width?g(Ge(),e.width):g(_e())}),L),We=function(n){function r(){var n,t;s(this,r);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return t=u(this,(n=l(r)).call.apply(n,[this].concat(i))),e(c(t),"state",{resetWidth:!1}),e(c(t),"handleWindowResize",(function(){t.setState({resetWidth:!0},(function(){setTimeout((function(){return t.setState({resetWidth:!1})}),100)}))})),t}return a(r,p),d(r,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleWindowResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWindowResize)}},{key:"render",value:function(){var e=this.props,n=e.width,r=t(e,["width"]),i=this.state.resetWidth;return f.createElement(Ve,o({width:i||isNaN(n)?"auto":"".concat(n,"px")},r))}}]),r}();function Be(){var e=r(["\n      cursor: pointer;\n    "]);return Be=function(){return e},e}function Ue(){var e=r(["\n          opacity: 0;\n        "]);return Ue=function(){return e},e}function Le(){var e=r(["\n    > div {\n      padding-top: ",";\n      padding-bottom: ",";\n      padding-left: 24px;\n      padding-right: 24px;\n    }\n    font-weight: ",";\n    ."," {\n      margin-left: 3px;\n      ",";\n    }\n    &:hover {\n      ."," {\n        opacity: 1;\n      }\n    }\n  "]);return Le=function(){return e},e}function Fe(){var e=r(["\n  > div {\n    display: flex;\n    align-items: flex-start;\n    min-width: ",";\n  }\n  ",";\n  ",";\n"]);return Fe=function(){return e},e}function Ke(){var e=r(["\n    th {\n      background-color: ",";\n      &:first-child {\n        border-top-left-radius: ",";\n      }\n      &:last-child {\n        border-top-right-radius: ",";\n      }\n    }\n    ."," {\n      padding-top: ",";\n      padding-bottom: ",";\n    }\n  "]);return Ke=function(){return e},e}function Je(){var e=r(["\n  text-align: left;\n  ",";\n"]);return Je=function(){return e},e}e(We,"propTypes",{width:m.number}),e(We,"defaultProps",{width:null});var Qe=function(n){var t;return(t={},e(t,oe.small,{top:"8px",bottom:"4px"}),e(t,oe.medium,{top:"15px",bottom:"12px"}),e(t,oe.large,{top:"15px",bottom:"12px"}),t)[n]},Xe=h.thead(Je(),(function(e){return g(Ke(),e.theme.colors.sensitiveGrey.base,e.theme.borderRadius,e.theme.borderRadius,te,Qe(e.size).top,Qe(e.size).bottom)})),Ye=h.th(Fe(),"100px",(function(e){return g(Le(),Qe(e.size).top,Qe(e.size).bottom,e.theme.fontWeight.black,k,e.hideIconUntilHovered&&g(Ue()),k)}),(function(e){return e.onClick&&g(Be())})),Ze=function(e){var n=e.children,t=e.sortChangeHandler,r=e.isSortable,o=e.sortMode,i=e.size;return f.createElement(Ye,{onClick:r?t:null,sortMode:o,size:i,hideIconUntilHovered:o===re.unsorted},f.createElement("div",null,n,r&&f.createElement(ve,{pointingDown:o===re.descending,inactive:o===re.unsorted,style:{marginTop:"-2px"}})))};Ze.propTypes={children:m.node.isRequired,sortChangeHandler:m.func.isRequired,isSortable:m.bool.isRequired,sortMode:m.string.isRequired,size:m.string.isRequired};var $e=z({name:"Table"}),en=function(n){function r(){var n,t;s(this,r);for(var a=arguments.length,d=new Array(a),p=0;p<a;p++)d[p]=arguments[p];return t=u(this,(n=l(r)).call.apply(n,[this].concat(d))),e(c(t),"state",{rows:[],disabledRowsIds:[],sortModes:t.props.columns.map((function(e){return ie})),sortingColumnIndex:void 0,paginationCurrentPage:t.props.paginationDefaults.currentPage,paginationPerPage:t.props.paginationDefaults.itemsPerPageAmount}),e(c(t),"tableElementHTMLId",z({name:"Table--".concat(O())})),e(c(t),"recomputeState",(function(e){e.columns;var n=e.rows,r=e.disabledRowsIndexes,o=e.isSelectable,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{sortingColumnIndex:void 0},s=(a.sortingColumnIndex,n.map((function(e,n){return{cells:e,state:i({},o&&{isSelected:e.isDefaultChecked||!1}),id:O(),initialIndex:n}}))),u=t.state.sortModes;t.setState({rows:s,sortModes:u,hasRowInfo:ne((function(e){return!!e.cells.rowInfo}),s),disabledRowsIds:r.map((function(e){return e<s.length&&s[e].id}))},t.updateSorting)})),e(c(t),"getCurrentSortMode",(function(){return t.state.sortModes[t.state.sortingColumnIndex]||ie})),e(c(t),"getNewSortMode",(function(e){var n=_(re),r=n.indexOf(t.state.sortModes[e])+1;return n[r>=n.length?r%n.length:r]})),e(c(t),"updateSorting",(function(e){var n=t.props.columns,r=t.state.sortModes;if(void 0!==e){var o=t.getNewSortMode(e),i=n[e];i.onSort&&i.onSort({sortColumn:i,sortMode:o}),t.setState({sortingColumnIndex:e,sortModes:r.map((function(n,t){return t===e?o:ie}))})}})),e(c(t),"getSortChangeHandler",(function(e){return function(){return t.updateSorting(e)}})),e(c(t),"handleRowOnChange",(function(e){var n=e.cells,t=e.state;return n.onChange&&n.onChange({rowState:t,cells:n})})),e(c(t),"getRowStateChangeHandler",(function(n){return function(r){var o=t.state.rows,a=$((function(e){return e.id===n}),o),s=o[a],u=s.state[r],l=i({},s.state,{},r&&e({},r,!u));t.setState({rows:Y(a,i({},s,{state:l}),o)},(function(){t.handleRowOnChange(t.state.rows[a])}))}})),e(c(t),"getNonDisabledVisibleRows",(function(){return t.getVisibleRows().filter((function(e){var n=e.id;return!t.isRowDisabled(n)}))})),e(c(t),"areAllRowStateOfTypeTrue",(function(e){return J((function(n){return!!n.state[e]}),t.getNonDisabledVisibleRows())})),e(c(t),"areAnyRowStateOfTypeTrue",(function(e){return ne((function(n){return!!n.state[e]}),t.getNonDisabledVisibleRows())})),e(c(t),"getGlobalChangeHandler",(function(n){return function(r){var o=t.state.rows,a=t.getVisibleRows(),s=a.map(V("id")),u=n===ue?t.areAllRowStateOfTypeTrue(n):t.areAnyRowStateOfTypeTrue(n);t.setState({rows:o.map((function(r){var o=!t.isRowDisabled(r.id)&&j(r.id,s);return F("state",i({},r.state,{},o&&e({},n,!u)),r)}))},(function(){return a.map(t.handleRowOnChange)}))}})),e(c(t),"renderGlobalHandlerComponent",(function(){var e=t.state.hasRowInfo,n=t.props,r=n.isSelectable,i=n.size,a=ye({rowInfoArrow:e,checkbox:r,size:i});return a?f.createElement("th",{width:30,className:te},f.createElement(a,o({},r&&{onChange:t.getGlobalChangeHandler(ue),isChecked:t.areAllRowStateOfTypeTrue(ue)},e&&{onClick:t.getGlobalChangeHandler(se),pointingDown:t.areAnyRowStateOfTypeTrue(se)}))):null})),e(c(t),"isRowDisabled",(function(e){return j(e,t.state.disabledRowsIds)})),e(c(t),"handlePaginationChange",(function(e){return t.setState({paginationCurrentPage:e},t.updateSorting)})),e(c(t),"handlePaginationItemsPerPageAmountChange",(function(e){return t.setState({paginationPerPage:e},t.updateSorting)})),e(c(t),"getRowsForCurrentPage",(function(e){var n=t.props.withPagination,r=t.state,o=r.paginationCurrentPage,i=r.paginationPerPage;return n?e.slice((o-1)*i,o*i):e})),e(c(t),"getVisibleRows",(function(){var e=t.state,n=e.rows,r=e.sortingColumnIndex,o=t.props.columns;if(r>=0&&o[r].onSort)return n;var i=ae({sortingColumnIndex:r,sortMode:t.getCurrentSortMode(),columns:o,rows:n});return t.getRowsForCurrentPage(i)})),e(c(t),"renderWrappedTablePagination",(function(){var n=t.state,r=n.rows,o=n.paginationCurrentPage,i=n.paginationPerPage,a=t.props,s=a.columns,u=a.withPagination,l=a.paginationItemsPerPageOptions,c=a.paginationBelow,d={currentPage:o,itemsPerPageAmount:i,itemsCount:r.length,itemsPerPageOptions:l,onChange:t.handlePaginationChange,onItemsPerPageAmountChange:t.handlePaginationItemsPerPageAmountChange,isDisplayedBelowTable:c,style:e({},"margin".concat(c?"Top":"Bottom"),"10px")};return u?f.createElement("thead",null,f.createElement("tr",null,f.createElement("td",{colSpan:s.length},f.createElement(U,d)))):null})),t}return a(r,p),d(r,[{key:"componentDidMount",value:function(){this.recomputeState(this.props)}},{key:"componentDidUpdate",value:function(e){D(this.props.rows,e.rows)||this.recomputeState(this.props,this.state)}},{key:"render",value:function(){var e=this,n=this.state,r=n.hasRowInfo,i=n.sortModes,a=this.props,s=a.className,u=a.isSortable,l=a.isSelectable,c=(a.disabledRowsIndexes,a.size),d=(a.withPagination,a.paginationItemsPerPageOptions,a.paginationBelow),p=a.columns,m=t(a,["className","isSortable","isSelectable","disabledRowsIndexes","size","withPagination","paginationItemsPerPageOptions","paginationBelow","columns"]),h={displayRowInfoArrow:r,isSelectable:l,size:c};return f.createElement(H,{handleWidth:!0,resizableElementId:this.tableElementHTMLId},f.createElement(We,o({},T(["columns","rows"],m),{className:I($e,"".concat($e,"--").concat(c),s)}),f.createElement(qe,{id:this.tableElementHTMLId,size:c},!d&&this.renderWrappedTablePagination(),f.createElement(Xe,{size:c},f.createElement("tr",null,this.renderGlobalHandlerComponent(),p.map((function(n,t){return f.createElement(Ze,{key:t,sortChangeHandler:e.getSortChangeHandler(t),isSortable:u,sortMode:i[t],size:c},function(e,n){return"function"==typeof e?e(n):e}(n.header,n))})))),f.createElement("tbody",null,this.getVisibleRows().map((function(n){var t=n.cells,r=n.id,i=n.state;return f.createElement(ze,o({key:r,disabled:e.isRowDisabled(r),accessors:p.map(V("accessor")),renderers:p.map(V("cellRenderer")),cellsInfo:t,rowState:i,handleStateChange:e.getRowStateChangeHandler(r)},h))}))),d&&this.renderWrappedTablePagination())))}}]),r}();e(en,"propTypes",{columns:m.arrayOf(m.shape({header:m.oneOfType([m.string,m.func]).isRequired,accessor:m.func.isRequired,cellRenderer:m.func,sortMethod:m.func,onSort:m.func})).isRequired,rows:m.arrayOf(m.shape({rowInfo:m.node,isDefaultChecked:m.bool,onChange:m.func})).isRequired,isSortable:m.bool,isSelectable:m.bool,size:m.oneOf(Object.keys(oe)),disabledRowsIndexes:m.arrayOf(m.number),className:m.string,withPagination:m.bool,paginationDefaults:m.shape({currentPage:m.number,itemsPerPageAmount:m.number}),paginationItemsPerPageOptions:m.array,paginationBelow:m.bool}),e(en,"defaultProps",{columns:[],rows:[],isSortable:!0,isSelectable:!1,size:oe.small,disabledRowsIndexes:[],className:"",withPagination:!1,paginationDefaults:{currentPage:1,itemsPerPageAmount:10},paginationItemsPerPageOptions:U.defaultProps.itemsPerPageOptions,paginationBelow:!1});export default en;export{$e as TABLE_CLASSNAME};
