import{d as e,i as t,_ as n,a as i,e as r,f as a,g as o,l,m as s,b as c,j as u,h as d,k as m}from"./index-7c3a2ef8.js";import f,{PureComponent as h}from"react";import p from"prop-types";import y,{withTheme as x}from"styled-components";import{a as g}from"./_curry2-12509879.js";import{C as b}from"./colors-fe7a2ec1.js";import"./featureDetects-426db7d2.js";import{S as k}from"./index-2a1ab813.js";import"classnames";import{a as v}from"./attachClassName-14171279.js";import E from"uniqid";import{d as A}from"./charts-7fb9ca4e.js";import{VictoryChart as w,VictoryTooltip as C,Rect as R,VictoryLabel as S,VictoryVoronoiContainer as O,VictoryAxis as L,VictoryGroup as P,VictoryLine as z,VictoryScatter as M}from"victory";function T(){var t=e(["\n  max-width: 100%;\n  background: ",";\n  overflow: hidden;\n  height: ","px;\n"]);return T=function(){return t},t}var W=y.section(T(),(function(e){return e.theme.colors.white.base}),(function(e){return e.chartHeight})),Y=g((function(e,t){return t>e?t:e})),H=function(e){return f.createElement("div",{style:{position:"relative",height:0,width:"100%",padding:0,paddingBottom:"".concat(e.height/e.width*100,"%")}},f.createElement(w,t({},e,{style:n({},e.style,{parent:{position:"absolute",height:"100%",width:"100%",left:0,top:0}})})))};H.propTypes=w.propTypes;var F=function(){if("undefined"!=typeof document)return document.body.clientWidth<=k.phone},X=function(){if("undefined"!=typeof document)return!!window.MSInputMethodContext&&!!document.documentMode},q=b.WHITE,V=function(e){function t(){var e,n;r(this,t);for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];return n=a(this,(e=o(t)).call.apply(e,[this].concat(c))),l(s(n),"newWidth",(function(){return Math.max(n.props.width+(F()?25:50),90)})),l(s(n),"newHeight",(function(){return n.props.height+20})),n}return i(t,h),c(t,[{key:"render",value:function(){var e=this.props,t=e.x,n=e.y,i=e.dx,r=e.height,a="".concat(u,"LineGraphFlyout--").concat(E());return f.createElement("g",{transform:"translate(0 -18)"},f.createElement("defs",null,f.createElement("filter",{width:this.newWidth(),height:this.newHeight()-20,id:a},f.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"0",dy:"9"}),f.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:6}),f.createElement("feComponentTransfer",null,f.createElement("feFuncA",{type:"linear",slope:.2})),f.createElement("feMerge",null,f.createElement("feMergeNode",null),f.createElement("feMergeNode",{in:"SourceGraphic"})))),f.createElement("rect",{style:{fill:q},x:t+i-.5*this.newWidth(),y:n-r-15,width:this.newWidth(),height:this.newHeight(),rx:7,ry:7,filter:"url(#".concat(a,")")}),f.createElement("polygon",{points:"".concat(t-15,", ").concat(n," ").concat(t,", ").concat(n+15," ").concat(t+15,", ").concat(n),fill:q}))}}]),t}();l(V,"propTypes",{x:p.number,y:p.number,dx:p.number,width:p.number,height:p.number}),l(V,"defaultProps",{x:void 0,y:void 0,dx:void 0,width:void 0,height:void 0}),l(V,"defaultEvents",C.defaultEvents);var B=b.WHITE,N=function(e){var n=e.text,i=e.style,r=e.isMobile,a=d(e,["text","style","isMobile"]);return f.createElement("g",null,f.createElement(R,t({width:r?8:12*n.length,height:15,style:{fill:B},transform:"translate(-10 -16)"},a)),f.createElement(S,t({dx:0,text:n,style:i},a)))};N.propTypes={isMobile:p.bool,text:p.string,style:p.object},N.defaultProps={isMobile:!1,text:void 0,style:null};var I=b.WHITE,j=function(e){var t=e.chartPadding,n=e.chartWidth,i=e.chartHeight,r=e.domainAxisX,a=e.domainAxisY,o=e.labelsAxisX,l=e.mobileChartPadding,s=e.theme,c=e.tickCountAxisX,u=e.tickCountAxisY,d=e.tickFormatAxisX,h=e.tickValuesAxisX,p=e.tickFormatAxisY,y=e.tickValuesAxisY,x=e.data,g=e.linesColors,b=e.mobileLineSize,k=e.lineSize,v=F(),E={fontFamily:s.fontFamily,fontSize:12,letterSpacing:.2,fill:s.colors.richBlack.base,fillOpacity:.3},A={fontSize:s.fontSize.h6,fontWeight:s.fontWeight.bold,fill:s.colors.richBlack.base},R=function(e){var t=g&&g.indexOf(s.colors.primary.base)||0;return g[(t+e)%g.length]},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?null:"function"==typeof p?p(e):p},W=X?H:w;return f.createElement(W,{events:[{target:"parent",eventHandlers:v?{onMouseOver:function(){return null},onMouseOut:function(){return null},onClick:function(){return{target:"data",childName:"scatter"}}}:{onMouseLeave:function(){return null},onClick:function(){return null}}}],containerComponent:f.createElement(O,{voronoiBlacklist:x.map((function(e,t){return"line-".concat(t)})),allowPan:!0,responsive:!1,allowZoom:!1,activateLabels:!0,labels:function(e,t){return T(e.y,t)},labelComponent:f.createElement(C,{dy:18,dx:function(e){return function(e,t){return e/Y.apply(void 0,m(t.map((function(e){return e.length}))))>.85}(e.x,x)?v?-28:-32:0},flyoutComponent:f.createElement(V,null),labelComponent:f.createElement(S,{lineHeight:1.6,style:{fontFamily:s.fontFamily,fontWeight:900}}),orientation:"top",pointerLength:5,flyoutStyle:{stroke:s.colors.sensitiveGrey.dark,fill:s.colors.white.base}})}),domainPadding:{x:5,y:15},singleQuadrantDomainPadding:!1,padding:v?l:t,width:n,height:i,style:{padding:0}},f.createElement(L,{domain:r,offsetY:v?44:25,tickCount:c,tickLabelComponent:f.createElement(N,{dy:v?0:-16,isMobile:v,verticalAnchor:"start",textAnchor:"start",style:E}),tickFormat:d,tickValues:h,style:{axis:{stroke:"#d1d1d1"}}}),f.createElement(S,{text:o[0],x:v?l.left:t.left,y:i-10,textAnchor:"start",dx:4,width:10,style:E}),!v&&f.createElement(S,{text:o[1],x:n-t.right,y:i-10,textAnchor:"end",style:E}),f.createElement(L,{dependentAxis:!0,crossAxis:!1,domain:a,tickCount:u,tickFormat:function(e){return T(e)},tickValues:y,tickLabelComponent:f.createElement(S,{textAnchor:"end",transform:"translate(".concat(v?5:-15," 0)")}),style:{axis:{stroke:"transparent"},tickLabels:E}}),x.map((function(e,t){return f.createElement(P,{key:"group-".concat(t)},f.createElement(z,{groupComponent:f.createElement("g",null),data:e,interpolation:"natural",name:"line-".concat(t),style:{data:{stroke:R(t),strokeWidth:v?b:k,strokeLinecap:"round"}}}),f.createElement(M,{data:e,name:"dataPoints-".concat(t),size:function(e,t){return t?5:0},style:{data:{fill:R(t),stroke:I,strokeWidth:2},labels:A}}))})))};j.propTypes=D,j.defaultProps=U;var _=x(j),G=function(e){function n(){var e;return r(this,n),e=a(this,o(n).call(this)),l(s(e),"state",{width:0}),l(s(e),"updateSize",(function(){return e.setState({width:e.wrapperRef.current.getBoundingClientRect().width})})),e.wrapperRef=f.createRef(),e}return i(n,h),c(n,[{key:"componentDidMount",value:function(){this.updateSize(),window.addEventListener("resize",this.updateSize)}},{key:"componentDidUpdate",value:function(){this.updateSize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateSize)}},{key:"render",value:function(){var e=this.props,n=e.data,i=d(e,["data"]),r=this.state.width;return f.createElement(W,t({},i,{ref:this.wrapperRef}),f.createElement(_,t({},i,{data:n,chartWidth:r,chartHeight:i.chartHeight})))}}]),n}(),D={chartPadding:p.shape({top:p.number.isRequired,bottom:p.number.isRequired,left:p.number.isRequired,right:p.number.isRequired}),chartHeight:p.number,data:p.arrayOf(p.arrayOf(p.shape({x:p.number.isRequired,y:p.number.isRequired}))).isRequired,domainAxisX:p.arrayOf(p.number),domainAxisY:p.arrayOf(p.number),labelsAxisX:p.array,linesColors:p.arrayOf(p.string),lineSize:p.number,mobileLineSize:p.number,mobileChartPadding:p.shape({top:p.number.isRequired,bottom:p.number.isRequired,left:p.number.isRequired,right:p.number.isRequired}),tickCountAxisX:p.number,tickCountAxisY:p.number,tickFormatAxisX:p.oneOfType([p.arrayOf(p.string),p.func]),tickValuesAxisX:p.arrayOf(p.number),tickFormatAxisY:p.oneOfType([p.arrayOf(p.string),p.func]),tickValuesAxisY:p.arrayOf(p.number),tickAxisYPrecision:p.number},U={chartPadding:{top:75,bottom:45,left:110,right:35},chartHeight:400,domainAxisX:void 0,domainAxisY:void 0,labelsAxisX:[],linesColors:[b.VIBRANT_CYAN,b.VIBRANT_YELLOW,b.VIBRANT_GREEN,b.VIBRANT_MAGENTA,b.RICH_PURPLE,b.RICH_BLUE],lineSize:5,mobileLineSize:3,tickAxisYPrecision:0,mobileChartPadding:{top:45,bottom:75,left:75,right:25},tickCountAxisX:4,tickCountAxisY:6,tickFormatAxisX:A,tickValuesAxisX:null,tickFormatAxisY:A,tickValuesAxisY:null,tooltipLabelFormat:null};G.propTypes=D,G.defaultProps=U;var Q=v(G).Component;export default Q;export{G as LineGraph,U as defaultProps,D as propTypes};
