import{d as t,a as e,b as a,l as n,e as r,f as o,g as s,m as l,h as i,i as d}from"./index-7c3a2ef8.js";import u,{PureComponent as c}from"react";import p from"prop-types";import f,{css as m}from"styled-components";import"./_curry2-12509879.js";import"./_has-bd75b317.js";import"./featureDetects-426db7d2.js";import{m as h}from"./index-2a1ab813.js";import"./path-f5ccb8a3.js";import"./_isString-9eecd9ee.js";import D from"classnames";import{ICON_CLASSNAME as g,Glyph as C}from"./icon.js";import{g as S}from"./attachClassName-14171279.js";import"./_isArray-a8fe11f0.js";import"./misc-78673da2.js";import"./_xfBase-c1afe6f2.js";import"stream";import"uniqid";import Y from"react-click-outside";import"./isEmpty-80c9cae4.js";import"react-resizable";import"react-resize-detector";import{I as E}from"./Input-40f5c603.js";import{_ as I}from"./find-beb57f40.js";import b,{TEXT_FIELD_CLASSNAMES as v}from"./textField.js";import{b as M,F as y,a as V}from"./index-04769a1c.js";import x from"date-fns";var O="DD / MM / YYYY",R="Date is not after start date",A="Invalid Date",j=[" / ",".","-"],N=["DD / MM / YYYY","MM / DD / YYYY","DD.MM.YYYY","MM.DD.YYYY","DD-MM-YYYY","MM-DD-YYYY"],_=function(t,e,a){var n=e.toLowerCase().split(a),r=t.split(a),o={dd:r[n.indexOf("dd")],mm:r[n.indexOf("mm")],yyyy:r[n.indexOf("yyyy")]};return"".concat(o.yyyy,"-").concat(o.mm,"-").concat(o.dd)},w=function(t,e,a,n,r){return!e||x.format(e,n)!==a||(!(!x.isAfter(t,e)&&!x.isEqual(t,e))||r)};function L(){var e=t(["\n  position: absolute;\n  z-index: 1;\n  top: 68px;\n  display: ",";\n"]);return L=function(){return e},e}function P(){var e=t(["\n        cursor: not-allowed;\n      "]);return P=function(){return e},e}function B(){var e=t(["\n        font-size: 14px;\n      "]);return B=function(){return e},e}function F(){var e=t(["\n          opacity: 0.5;\n        "]);return F=function(){return e},e}function U(){var e=t(["\n  display: flex;\n  ."," {\n    width: 120px;\n    margin-right: 9px;\n    &:first-child {\n      margin-right: 10px;\n    }\n    label {\n      ",";\n    }\n    ."," {\n      ",";\n    }\n  }\n  ."," {\n    top: 36px;\n    ",";\n  }\n"]);return U=function(){return e},e}function W(){var e=t(["\n  position: relative;\n"]);return W=function(){return e},e}var k=f.section(W()),T=f.section(U(),v.BASE,(function(t){return t.disabled&&m(F())}),E,h.max.phone(B()),g,(function(t){return t.disabled&&m(P())})),z=f.section(L(),(function(t){return t.isOpen?"block":"none"})),q=new Date,$=function(t){function p(){var t,e;r(this,p);for(var a=arguments.length,i=new Array(a),d=0;d<a;d++)i[d]=arguments[d];return e=o(this,(t=s(p)).call.apply(t,[this].concat(i))),n(l(e),"state",{startDate:e.props.defaultStartDate,endDate:e.props.defaultEndDate,startDateInputValue:e.props.defaultStartDate?x.format(e.props.defaultStartDate,e.props.format):"",endDateInputValue:e.props.defaultEndDate?x.format(e.props.defaultEndDate,e.props.format):"",formatSeparator:null,formatRegExp:null,startDateWasInUse:!1,endDateWasInUse:!1,isCalendarOpen:!1,isSelectingRange:!1,currentMonth:e.props.defaultStartDate||q,calendarYear:e.props.defaultStartDate?x.format(e.props.defaultStartDate,"YYYY"):x.format(q,"YYYY")}),n(l(e),"changeCurrentMonth",(function(t){e.setState({currentMonth:t,calendarYear:x.format(t,"YYYY")})})),n(l(e),"changeCalendarYear",(function(t){e.setState({calendarYear:t}),t.match(M)&&e.setState((function(e){var a=e.currentMonth;return{currentMonth:x.setYear(a,t)}}))})),n(l(e),"blurCalendarYear",(function(){var t=e.state,a=t.calendarYear,n=t.currentMonth;a.match(M)||e.setState({calendarYear:x.format(n,y.YEAR_FORMAT)})})),n(l(e),"validateStartDate",(function(t){return!e.state.startDateWasInUse||e.commonInputValidate(t)})),n(l(e),"validateEndDate",(function(t){var a=e.state,n=a.startDate,r=a.startDateInputValue,o=a.endDateWasInUse,s=a.formatSeparator,l=e.props,i=l.format,d=l.endDateValidationError;if(!o)return!0;var u=_(t,i,s);return!0===e.commonInputValidate(t)?w(u,n,r,i,d):e.commonInputValidate(t)})),n(l(e),"commonInputValidate",(function(t){return!(!t.match(e.state.formatRegExp)||!x.isValid(x.parse(_(t,e.props.format,e.state.formatSeparator))))||e.props.dateValidationError})),n(l(e),"handleClickOutside",(function(){e.setState((function(t){return{isCalendarOpen:!1,currentMonth:t.startDate||q}}))})),n(l(e),"handleInputChange",(function(t,a){var r=e.state,o=r.formatSeparator,s=r.endDate,l=e.props,i=l.format,d=l.rangeMode,u=2+o.length+2,c="startDateInputValue"===a;if((2===t.length||t.length===u)&&t.length>e.state[a].length&&(t="".concat(t).concat(o)),e.setState(n({},a,t)),t.length===i.length&&!0===e.commonInputValidate(t)){var p,f=x.parse(_(t,i,e.state.formatSeparator));e.setState((n(p={},c?"startDate":"endDate",f),n(p,"isSelectingRange",d&&c&&(!s||x.isAfter(f,s))),p)),c&&x.isAfter(f,s)&&e.setState({endDate:null,endDateInputValue:""}),c&&e.setState({currentMonth:f,calendarYear:x.format(f,y.YEAR_FORMAT)}),c&&d||e.setState({isCalendarOpen:!1}),c?e.props.startDateChange(f):e.props.endDateChange(f)}})),n(l(e),"handleStartDateChange",(function(t){e.handleInputChange(t,"startDateInputValue")})),n(l(e),"handleEndDateChange",(function(t){e.handleInputChange(t,"endDateInputValue")})),n(l(e),"handleStartSelectFromCalendar",(function(t){e.setState({startDate:t,startDateInputValue:x.format(t,e.props.format),currentMonth:t}),e.handleInputChange(x.format(t,e.props.format),"startDateInputValue"),e.props.rangeMode?e.setState({isSelectingRange:!0}):e.setState({isCalendarOpen:!1})})),n(l(e),"handleEndSelectFromCalendar",(function(t){e.setState({endDate:t,endDateInputValue:t?x.format(t,e.props.format):"",isCalendarOpen:!t,isSelectingRange:!t}),null!=t&&e.handleInputChange(x.format(t,e.props.format),"endDateInputValue")})),n(l(e),"handleStartDateBlur",(function(){e.state.startDateInputValue&&e.setState({startDateWasInUse:!0})})),n(l(e),"handleEndDateBlur",(function(){return e.setState({endDateWasInUse:!0})})),n(l(e),"openCalendar",(function(){e.props.withCalendar&&e.setState({isCalendarOpen:!0})})),n(l(e),"toggleCalendar",(function(){var t=e.props,a=t.withCalendar,n=t.disabled;a&&!n&&e.setState((function(t){return{isCalendarOpen:!t.isCalendarOpen}}))})),e}return e(p,c),a(p,[{key:"componentDidMount",value:function(){var t=this.props.format,e=function(t){var e=j;return I((function(e){return t.indexOf(e)>0}))(e)}(t),a=function(t){var e=t.toLowerCase().replace("dd","(0[1-9]|[12]\\d|3[01])").replace("mm","(0[1-9]|1[0-2])").replace("yyyy","[12]\\d{3}").replace(/[/.]/g,"\\$&").replace(/\s/g,"\\s");return new RegExp("^".concat(e,"$"))}(t);this.setState({formatSeparator:e,formatRegExp:a})}},{key:"render",value:function(){var t=this.props,e=t.className,a=t.format,n=t.startDateLabel,r=t.disabled,o=t.endDateLabel,s=t.withCalendar,l=t.rangeMode,c=t.calendarProps,p=i(t,["className","format","startDateLabel","disabled","endDateLabel","withCalendar","rangeMode","calendarProps"]),f=this.state,m=f.startDateInputValue,h=f.endDateInputValue,g=f.isCalendarOpen,S=f.startDate,Y=f.endDate,E=f.isSelectingRange,I=f.currentMonth,v=f.calendarYear,M=a.toLowerCase();return u.createElement(k,d({className:D(H.BASE,e)},p),u.createElement(T,{disabled:r,className:H.INPUT_WRAPPER},u.createElement(b,{grey:!0,placeholder:M,label:n,value:m,onChange:this.handleStartDateChange,disabled:r,validate:this.validateStartDate,onBlur:this.handleStartDateBlur,onFocus:this.openCalendar}),l?u.createElement(b,{grey:!0,placeholder:M,label:o,value:h,onChange:this.handleEndDateChange,disabled:r,validate:this.validateEndDate,onBlur:this.handleEndDateBlur,onFocus:this.openCalendar}):null,s?u.createElement(C,{name:"calendar",size:18,color:r?"sensitiveGrey.darkest":void 0,onClick:this.toggleCalendar}):null),s?u.createElement(z,{isOpen:g,className:H.CALENDAR_CONTAINER},u.createElement(V,d({startDateSelect:this.handleStartSelectFromCalendar,endDateSelect:this.handleEndSelectFromCalendar,selectedStartDate:S,selectedEndDate:Y,isSelectingRange:E,rangeMode:l,currentMonth:I,changeCurrentMonth:this.changeCurrentMonth,yearInputValue:v,changeYearInputValue:this.changeCalendarYear,blurYearInput:this.blurCalendarYear},c))):null)}}]),p}();n($,"propTypes",{disabled:p.bool,withCalendar:p.bool,rangeMode:p.bool,defaultStartDate:p.instanceOf(Date),defaultEndDate:p.instanceOf(Date),format:p.oneOf(N),startDateLabel:p.string,endDateLabel:p.string,startDateChange:p.func,endDateChange:p.func,className:p.string,calendarProps:p.object,dateValidationError:p.string,endDateValidationError:p.string}),n($,"defaultProps",{disabled:!1,withCalendar:!1,rangeMode:!1,defaultStartDate:null,defaultEndDate:null,format:O,startDateLabel:"Start Date",endDateLabel:"End Date",startDateChange:function(){},endDateChange:function(){},className:null,calendarProps:{},dateValidationError:A,endDateValidationError:R});var G=S($),H={BASE:G,INPUT_WRAPPER:"".concat(G,"__Input"),CALENDAR_CONTAINER:"".concat(G,"__Calendar")},J=Y($);export default J;export{H as DATE_PICKER_CLASSNAMES,$ as DatePicker};
